# –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è —Ä–æ—Ç–∞—Ü—ñ—ó –º—É–ª—å—Ç–∏-–∞–∫–∞—É–Ω—Ç—ñ–≤ Google Antigravity

TypeScript —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è [pi-coding-agent](https://github.com/badlogic/pi-mono), —è–∫–µ —Ä–µ–∞–ª—ñ–∑—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Ä–æ—Ç–∞—Ü—ñ—é –∞–∫–∞—É–Ω—Ç—ñ–≤ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ `google-antigravity` –¥–ª—è –æ–±—Ö–æ–¥—É –æ–±–º–µ–∂–µ–Ω—å —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤.

## –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ **–ü–æ–≤–Ω–∏–π OAuth 2.0 flow** - –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –æ—Ç—Ä–∏–º–∞–Ω–Ω—è–º —Ç–æ–∫–µ–Ω—ñ–≤  
‚úÖ **–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –º—É–ª—å—Ç–∏-–∞–∫–∞—É–Ω—Ç—ñ–≤** - –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–µ–∫—ñ–ª—å–∫–æ—Ö Google OAuth –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö  
‚úÖ **–§–∞–π–ª –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö** - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤ `~/.pi/agent/rotation-credentials.json` –∑ –ø—Ä–∞–≤–∞–º–∏ 600  
‚úÖ **–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/rotationsetup` –∑ –≤–∏–±–æ—Ä–æ–º –º–µ—Ç–æ–¥—É  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è** - –í–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –æ–±–º–µ–∂–µ–Ω–Ω—è (429, 404, –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è –∫–≤–æ—Ç–∏) —Ç–∞ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π refresh –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤  
‚úÖ **–†—É—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è** - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É `rotate_account` –¥–ª—è —Ä—É—á–Ω–æ—ó —Ä–æ—Ç–∞—Ü—ñ—ó  
‚úÖ **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ —Å–µ—Å—ñ—ó** - –°—Ç–∞–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—ñ–≤ —Ç–∞ –ø—Ä–∞—Ü—é—î –º—ñ–∂ –≥—ñ–ª–∫–∞–º–∏  
‚úÖ **–ú—ñ—Ç–∫–∏ –∞–∫–∞—É–Ω—Ç—ñ–≤** - –î—Ä—É–∂–Ω—ñ –Ω–∞–∑–≤–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É  
‚úÖ **–ö–∞—Å—Ç–æ–º–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** - –ö—Ä–∞—Å–∏–≤–∏–π –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ TUI –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ç–µ–º  

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ì–ª–æ–±–∞–ª—å–Ω–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

–†–æ–∑–º—ñ—Å—Ç—ñ—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤ –≥–ª–æ–±–∞–ª—å–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó pi —Ä–æ–∑—à–∏—Ä–µ–Ω—å:

```bash
# –°–∫–æ–ø—ñ—é–π—Ç–µ –≤ –≥–ª–æ–±–∞–ª—å–Ω—É –ø–∞–ø–∫—É —Ä–æ–∑—à–∏—Ä–µ–Ω—å
cp account-rotation.ts ~/.pi/agent/extensions/

# –ê–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å —Å–∏–º–≤–æ–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
ln -s $(pwd)/account-rotation.ts ~/.pi/agent/extensions/account-rotation.ts
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

–†–æ–∑–º—ñ—Å—Ç—ñ—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `.pi/extensions/` –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É:

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é —Ä–æ–∑—à–∏—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç—É
mkdir -p .pi/extensions

# –°–∫–æ–ø—ñ—é–π—Ç–µ –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å —Å–∏–º–≤–æ–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
cp account-rotation.ts .pi/extensions/
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –¢–∏–º—á–∞—Å–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –ª–∏—à–µ –¥–ª—è –æ–¥–Ω—ñ—î—ó —Å–µ—Å—ñ—ó:

```bash
pi -e ./account-rotation.ts
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OAuth (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ OAuth 2.0 flow –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:

```bash
export GOOGLE_CLIENT_ID="your-client-id.apps.googleusercontent.com"
export GOOGLE_CLIENT_SECRET="your-client-secret"
```

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ Client ID —Ç–∞ Secret:
1. –í—ñ–¥–≤—ñ–¥–∞–π—Ç–µ [Google Cloud Console](https://console.cloud.google.com/)
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–±–æ –≤–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å "Generative Language API"
4. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ "APIs & Services" ‚Üí "Credentials"
5. –°—Ç–≤–æ—Ä—ñ—Ç—å "OAuth 2.0 Client ID" (—Ç–∏–ø: Desktop app)
6. –î–æ–¥–∞–π—Ç–µ redirect URI: `http://localhost:8888/callback`
7. –°–∫–æ–ø—ñ—é–π—Ç–µ Client ID —Ç–∞ Client Secret

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—ñ–≤

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/rotationsetup` –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–µ–∫—ñ–ª—å–∫–æ—Ö –∞–∫–∞—É–Ω—Ç—ñ–≤ Google Antigravity:

```
/rotationsetup
```

–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –º–∞–π—Å—Ç–µ—Ä –∑–∞–ø—Ä–æ–ø–æ–Ω—É—î –≤–∞–º –≤–∏–±—Ä–∞—Ç–∏ –º–µ—Ç–æ–¥:

#### –ú–µ—Ç–æ–¥ 1: OAuth 2.0 Flow (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–Ø–∫—â–æ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–∏–π OAuth flow:

1. –í–∏–±–µ—Ä—ñ—Ç—å "OAuth 2.0 Flow (Browser)"
2. –í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä –∑ Google OAuth –µ–∫—Ä–∞–Ω–æ–º
3. –£–≤—ñ–π–¥—ñ—Ç—å —Ç–∞ –¥–æ–∑–≤–æ–ª—å—Ç–µ –¥–æ—Å—Ç—É–ø
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Ç–æ–∫–µ–Ω–∏
5. –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–æ–¥–∞–π—Ç–µ –º—ñ—Ç–∫—É –¥–ª—è –∞–∫–∞—É–Ω—Ç—É

**–ü–µ—Ä–µ–≤–∞–≥–∏ OAuth flow:**
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–æ - –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–æ–∫–µ–Ω–∏ –≤—Ä—É—á–Ω—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- ‚úÖ –û—Ç—Ä–∏–º—É—î—Ç–µ refresh token –¥–ª—è –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

#### –ú–µ—Ç–æ–¥ 2: –†—É—á–Ω–µ –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–¥–∞—Ç–∏:

**–í–∞—Ä—ñ–∞–Ω—Ç A: –ü–æ–≤–Ω–∏–π OAuth JSON**
```json
{"refresh":"ya29...", "access":"ya29...", "expires":1707436800000}
```

**–í–∞—Ä—ñ–∞–Ω—Ç B: –õ–∏—à–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É** (refresh token –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ —Ç–µ –∂ –∑–Ω–∞—á–µ–Ω–Ω—è)
```
ya29.a0AfB_byC...
```

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è:
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å –∫–æ–∂–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ
- –î–æ–∑–≤–æ–ª–∏—Ç—å –¥–æ–¥–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∞–∫–∞—É–Ω—Ç—ñ–≤
- –ó–±–µ—Ä–µ–∂–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤ —Å–µ—Å—ñ—ó
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∞–∫—Ç–∏–≤—É—î –ø–µ—Ä—à–∏–π –∞–∫–∞—É–Ω—Ç

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É—î –ø–æ–º–∏–ª–∫–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ:

- **429 Too Many Requests** (–ó–∞–±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤)
- **404 Not Found** (–ø–æ–≤'—è–∑–∞–Ω–æ –∑ –∫–≤–æ—Ç–æ—é)
- **Resource Exhausted** (–†–µ—Å—É—Ä—Å–∏ –≤–∏—á–µ—Ä–ø–∞–Ω–æ)
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è **Quota Exceeded** (–ö–≤–æ—Ç—É –ø–µ—Ä–µ–≤–∏—â–µ–Ω–æ)

–ü—Ä–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—ñ:
1. –ü–æ–∫–∞–∑—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è: "Rate limit detected. Attempting to rotate account..." (–í–∏—è–≤–ª–µ–Ω–æ –æ–±–º–µ–∂–µ–Ω–Ω—è. –°–ø—Ä–æ–±–∞ —Ä–æ—Ç–∞—Ü—ñ—ó –∞–∫–∞—É–Ω—Ç—É...)
2. –ü–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∞–∫–∞—É–Ω—Ç —É —Å–ø–∏—Å–∫—É
3. –û–Ω–æ–≤–ª—é—î –ø—Ä–æ–≤–∞–π–¥–µ—Ä `google-antigravity` –Ω–æ–≤–∏–º–∏ –æ–±–ª—ñ–∫–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏
4. –ü–æ–∫–∞–∑—É—î —É—Å–ø—ñ—Ö: "Rotated to account 2/5 (rotation #1)" (–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –∞–∫–∞—É–Ω—Ç 2/5 (—Ä–æ—Ç–∞—Ü—ñ—è ‚Ññ1))

–Ø–∫—â–æ –≤—Å—ñ –∞–∫–∞—É–Ω—Ç–∏ –≤–∏—á–µ—Ä–ø–∞–Ω–æ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
```
All 5 account(s) may be rate limited. Please wait before retrying.
(–£—Å—ñ 5 –∞–∫–∞—É–Ω—Ç(–∏) –º–æ–∂—É—Ç—å –±—É—Ç–∏ –æ–±–º–µ–∂–µ–Ω—ñ. –ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–æ–º.)
```

### 3. –†—É—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è

LLM –º–æ–∂–µ –≤—Ä—É—á–Ω—É —ñ–Ω—ñ—Ü—ñ—é–≤–∞—Ç–∏ —Ä–æ—Ç–∞—Ü—ñ—é –∞–∫–∞—É–Ω—Ç—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É `rotate_account`:

**–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏—Å—è –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∞–∫–∞—É–Ω—Ç:**
```typescript
// LLM –≤–∏–∫–ª–∏–∫–∞—î —Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ
rotate_account({ action: "rotate" })
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å —Ä–æ—Ç–∞—Ü—ñ—ó:**
```typescript
rotate_account({ action: "status" })
// –ü–æ–≤–µ—Ä—Ç–∞—î: "5 account(s) configured, currently using account 2, 3 rotation(s) performed"
// (5 –∞–∫–∞—É–Ω—Ç(—ñ–≤) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ, –∑–∞—Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–∫–∞—É–Ω—Ç 2, –≤–∏–∫–æ–Ω–∞–Ω–æ 3 —Ä–æ—Ç–∞—Ü—ñ–π)
```

### 4. –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤ —Å–µ—Å—ñ—ó:

- –®—É–∫–∞–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "üîÑ Account Rotation" —É –≤–∞—à–æ–º—É —á–∞—Ç—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `rotate_account` –∑ `action: "status"`
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `Ctrl+O` –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª–µ–π

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó —Ç–æ–∫–µ–Ω—ñ–≤:
- –Ø–∫—â–æ —Ç–æ–∫–µ–Ω –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –º–µ–Ω—à–µ –Ω—ñ–∂ –∑–∞ 1 —Ö–≤–∏–ª–∏–Ω—É, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î refresh token –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ access token
- –û–Ω–æ–≤–ª–µ–Ω—ñ —Ç–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ñ–∞–π–ª—ñ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö

### 3. –ú—ñ—Ç–∫–∏ –∞–∫–∞—É–Ω—Ç—ñ–≤

–í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –¥—Ä—É–∂–Ω—é –Ω–∞–∑–≤—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É:
```
Account Label: Work Account
Account Label: Personal Gmail
Account Label: Backup Account
```

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∞–∫–∞—É–Ω—Ç–∏ –ø—Ä–∏ —Ä–æ—Ç–∞—Ü—ñ—ó:
```
‚úì Rotated to account Work Account (1/3) - rotation #1
```

## –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **–ø–æ–¥–≤—ñ–π–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ:

### 1. –§–∞–π–ª –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
–û–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `~/.pi/agent/rotation-credentials.json`:
- ‚úÖ **–ë–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É** - –§–∞–π–ª —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑ –ø—Ä–∞–≤–∞–º–∏ 600 (—Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω–∏–∫ –º–æ–∂–µ —á–∏—Ç–∞—Ç–∏/–ø–∏—Å–∞—Ç–∏)
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç** - JSON –∑ –ø–æ–ª—è–º–∏: id, refresh, access, expires, label, addedAt
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ pi
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∞–∫–∞—É–Ω—Ç—ñ–≤

### 2. –°—Ç–∞–Ω —Å–µ—Å—ñ—ó
–ü–æ—Ç–æ—á–Ω–∏–π —ñ–Ω–¥–µ–∫—Å —Ç–∞ –ª—ñ—á–∏–ª—å–Ω–∏–∫ —Ä–æ—Ç–∞—Ü—ñ–π –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Å–µ—Å—ñ—ó pi:
- ‚úÖ **–ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—ñ–≤** - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏ pi
- ‚úÖ **–í—Ä–∞—Ö–æ–≤—É—î –≥—ñ–ª–∫–∏** - –ö–æ–∂–Ω–∞ –≥—ñ–ª–∫–∞ –º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å—Ç–∞–Ω –¥–ª—è —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç—É –≤ —ñ—Å—Ç–æ—Ä—ñ—ó
- ‚úÖ **–ë–µ–∑–ø–µ—á–Ω–µ —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è** - –†–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è —Å–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∞–∫–∞—É–Ω—Ç—ñ–≤
- ‚úÖ **–ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –¥–µ—Ä–µ–≤—É** - –°—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –¥–µ—Ä–µ–≤–æ–º —Ä–æ–∑–º–æ–≤

–°—Ç–∞–Ω –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑:
- –§–∞–π–ª—É `rotation-credentials.json` - —Å–ø–∏—Å–æ–∫ –∞–∫–∞—É–Ω—Ç—ñ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –∑ –≤–∏–∫–ª–∏–∫—ñ–≤ `rotate_account` - –ø–æ—Ç–æ—á–Ω–∏–π —ñ–Ω–¥–µ–∫—Å
- –ö–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑ –∫–æ–º–∞–Ω–¥–∏ `/rotationsetup` - –ª—ñ—á–∏–ª—å–Ω–∏–∫ —Ä–æ—Ç–∞—Ü—ñ–π

## –î–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –í–∏—è–≤–ª–µ–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤–∏—è–≤–ª—è—î —Ü—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –ø–æ–º–∏–ª–æ–∫:
- HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ 429
- "rate limit" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- "quota exceeded" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- "resource_exhausted" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- 404 –ø–æ–º–∏–ª–∫–∏, —è–∫—ñ –∑–≥–∞–¥—É—é—Ç—å "not found" (–ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –∫–≤–æ—Ç–æ—é)
- "too many requests" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏

## –î–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### OAuth 2.0 Flow

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º—É—î –ø–æ–≤–Ω–∏–π OAuth 2.0 flow:

1. **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó** - –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è URL –∑ client_id, scope, redirect_uri
2. **–õ–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä** - –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ `http://localhost:8888` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ callback
3. **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** - –ë—Ä–∞—É–∑–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –∑ Google OAuth –µ–∫—Ä–∞–Ω–æ–º
4. **–û–±–º—ñ–Ω –∫–æ–¥—É –Ω–∞ —Ç–æ–∫–µ–Ω–∏** - Authorization code –æ–±–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ access + refresh —Ç–æ–∫–µ–Ω–∏
5. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤** - –¢–æ–∫–µ–Ω–∏ –±–µ–∑–ø–µ—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∑ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É 600

**–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:**
```bash
GOOGLE_CLIENT_ID - OAuth 2.0 Client ID –∑ Google Cloud Console
GOOGLE_CLIENT_SECRET - OAuth 2.0 Client Secret
```

**OAuth endpoints:**
- Authorization: `https://accounts.google.com/o/oauth2/v2/auth`
- Token: `https://oauth2.googleapis.com/token`
- Scope: `https://www.googleapis.com/auth/generative-language.retriever`

### –í–∏—è–≤–ª–µ–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤–∏—è–≤–ª—è—î —Ü—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –ø–æ–º–∏–ª–æ–∫:
- HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ 429
- "rate limit" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- "quota exceeded" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- "resource_exhausted" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
- 404 –ø–æ–º–∏–ª–∫–∏, —è–∫—ñ –∑–≥–∞–¥—É—é—Ç—å "not found" (–ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –∫–≤–æ—Ç–æ—é)
- "too many requests" —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `pi.registerProvider()` –∑ OAuth –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é –¥–ª—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö:

```typescript
pi.registerProvider("google-antigravity", {
  oauth: {
    name: "Google Antigravity (Multi-Account)",
    async login() {
      return currentAccountCredentials;
    },
    async refreshToken(creds) {
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ Google API
      return refreshOAuthToken(creds.refresh);
    },
    getApiKey(creds) {
      return creds.access;
    },
  },
});
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∞–Ω—É

```typescript
interface AccountCredentials {
  id: string;           // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
  refresh: string;      // Refresh —Ç–æ–∫–µ–Ω
  access: string;       // Access —Ç–æ–∫–µ–Ω
  expires: number;      // Timestamp –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—É –¥—ñ—ó
  label?: string;       // –î—Ä—É–∂–Ω—è –Ω–∞–∑–≤–∞ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
  addedAt: number;      // Timestamp –¥–æ–¥–∞–≤–∞–Ω–Ω—è
}

interface AccountRotationState {
  accounts: AccountCredentials[];  // –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∞–∫–∞—É–Ω—Ç—ñ–≤
  currentIndex: number;             // –Ü–Ω–¥–µ–∫—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É
  rotationCount: number;            // –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö —Ä–æ—Ç–∞—Ü—ñ–π
}
```

## –ü—Ä–∏–∫–ª–∞–¥ —Å–µ—Å—ñ—ó

### –ó OAuth 2.0 Flow

```
–í–∏: /rotationsetup
Pi: Starting account rotation setup...
    (–ü–æ—á–∏–Ω–∞—î–º–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ—Ç–∞—Ü—ñ—ó –∞–∫–∞—É–Ω—Ç—ñ–≤...)

[–î—ñ–∞–ª–æ–≥: Add Account (1) - Choose Method]
> OAuth 2.0 Flow (Browser)

Pi: Starting OAuth flow...
    Opening browser for authentication...
    https://accounts.google.com/o/oauth2/v2/auth?client_id=...
    
    Waiting for OAuth callback on http://localhost:8888...

[–ë—Ä–∞—É–∑–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è ‚Üí –í—Ö—ñ–¥ –≤ Google ‚Üí –î–æ–∑–≤—ñ–ª –¥–æ—Å—Ç—É–ø—É ‚Üí Redirect]

Pi: Exchanging code for tokens...
    ‚úì Tokens received!

[–î—ñ–∞–ª–æ–≥: Account Label (optional)]
> Work Account

‚úì Account 1 added successfully via OAuth!

[–î—ñ–∞–ª–æ–≥: Add Another?]
> Yes (–¢–∞–∫)

[–î—ñ–∞–ª–æ–≥: Add Account (2) - Choose Method]
> OAuth 2.0 Flow (Browser)

[–ü–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è OAuth flow –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É...]

[–î—ñ–∞–ª–æ–≥: Account Label (optional)]
> Personal Gmail

‚úì Account 2 added successfully via OAuth!

[–î—ñ–∞–ª–æ–≥: Add Another?]
> No (–ù—ñ)

‚úì Setup complete! 2 account(s) configured. Currently using Work Account.
  (–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ! 2 –∞–∫–∞—É–Ω—Ç(–∏) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ. –ó–∞—Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Work Account.)

üîÑ Account Rotation: Setup complete: 2 account(s)
  ‚Ä¢ 2 account(s) configured (2 –∞–∫–∞—É–Ω—Ç(–∏) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)
  ‚Ä¢ Active: Work Account (–ê–∫—Ç–∏–≤–Ω–∏–π: Work Account)

–í–∏: Generate a large dataset (–ó–≥–µ–Ω–µ—Ä—É–π –≤–µ–ª–∏–∫–∏–π –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö)
Pi: [... –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Work Account ...]
‚ö†Ô∏è Rate limit detected. Attempting to rotate account...
   (–í–∏—è–≤–ª–µ–Ω–æ –æ–±–º–µ–∂–µ–Ω–Ω—è. –°–ø—Ä–æ–±–∞ —Ä–æ—Ç–∞—Ü—ñ—ó –∞–∫–∞—É–Ω—Ç—É...)
‚úì Rotated to account Personal Gmail (2/2) - rotation #1
  (–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –∞–∫–∞—É–Ω—Ç Personal Gmail (2/2) - —Ä–æ—Ç–∞—Ü—ñ—è ‚Ññ1)
Pi: [... –ø—Ä–æ–¥–æ–≤–∂—É—î –∑ Personal Gmail ...]
```

### –ó —Ä—É—á–Ω–∏–º –≤–≤–µ–¥–µ–Ω–Ω—è–º —Ç–æ–∫–µ–Ω—ñ–≤

```
–í–∏: /rotationsetup
Pi: Starting account rotation setup...

[–î—ñ–∞–ª–æ–≥: Add Account (1) - Choose Method]
> Manual Token Input
> {"refresh":"ya29.a0...", "access":"ya29.a0...", "expires":1707436800000}
‚úì Account 1 added successfully! (–ê–∫–∞—É–Ω—Ç 1 —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ!)

[–î—ñ–∞–ª–æ–≥: Add Another? - –î–æ–¥–∞—Ç–∏ —â–µ –æ–¥–∏–Ω?]
> Yes (–¢–∞–∫)

[–î—ñ–∞–ª–æ–≥: Add Account (2) - –î–æ–¥–∞—Ç–∏ –∞–∫–∞—É–Ω—Ç (2)]
> ya29.a1...
‚úì Account 2 added successfully! (–ê–∫–∞—É–Ω—Ç 2 —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ!)

[–î—ñ–∞–ª–æ–≥: Add Another? - –î–æ–¥–∞—Ç–∏ —â–µ –æ–¥–∏–Ω?]
> No (–ù—ñ)

‚úì Setup complete! 2 account(s) configured. Currently using account 1.
  (–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ! 2 –∞–∫–∞—É–Ω—Ç(–∏) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ. –ó–∞—Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–∫–∞—É–Ω—Ç 1.)

üîÑ Account Rotation: Setup complete: 2 account(s)
  ‚Ä¢ 2 account(s) configured (2 –∞–∫–∞—É–Ω—Ç(–∏) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)
  ‚Ä¢ Active: Account 1 (–ê–∫—Ç–∏–≤–Ω–∏–π: –ê–∫–∞—É–Ω—Ç 1)

–í–∏: Generate a large dataset (–ó–≥–µ–Ω–µ—Ä—É–π –≤–µ–ª–∏–∫–∏–π –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö)
Pi: [... –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∞–∫–∞—É–Ω—Ç 1 ...]
‚ö†Ô∏è Rate limit detected. Attempting to rotate account...
   (–í–∏—è–≤–ª–µ–Ω–æ –æ–±–º–µ–∂–µ–Ω–Ω—è. –°–ø—Ä–æ–±–∞ —Ä–æ—Ç–∞—Ü—ñ—ó –∞–∫–∞—É–Ω—Ç—É...)
‚úì Rotated to account 2/2 (rotation #1)
  (–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –∞–∫–∞—É–Ω—Ç 2/2 (—Ä–æ—Ç–∞—Ü—ñ—è ‚Ññ1))
Pi: [... –ø—Ä–æ–¥–æ–≤–∂—É—î –∑ –∞–∫–∞—É–Ω—Ç–æ–º 2 ...]
```

## –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### "No accounts configured" (–ê–∫–∞—É–Ω—Ç–∏ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ)

–°–ø–µ—Ä—à—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ `/rotationsetup` –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—ñ–≤.

### "Failed to rotate account" (–ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–∫–æ–Ω–∞—Ç–∏ —Ä–æ—Ç–∞—Ü—ñ—é –∞–∫–∞—É–Ω—Ç—É)

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–µ –∑–º–æ–≥–ª–æ –æ–Ω–æ–≤–∏—Ç–∏ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
- OAuth –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ —î –¥—ñ–π—Å–Ω–∏–º–∏
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä google-antigravity –¥–æ—Å—Ç—É–ø–Ω–∏–π
- –ù–µ–º–∞—î —ñ–Ω—à–∏—Ö —Ä–æ–∑—à–∏—Ä–µ–Ω—å, —è–∫—ñ –∑–∞–≤–∞–∂–∞—é—Ç—å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### –ê–∫–∞—É–Ω—Ç–∏ –≤—Å–µ —â–µ –æ–±–º–µ–∂–µ–Ω—ñ

–Ø–∫—â–æ –≤—Å—ñ –∞–∫–∞—É–Ω—Ç–∏ –¥–æ—Å—è–≥–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ:
1. –ó–∞—á–µ–∫–∞–π—Ç–µ –ø–µ—Ä—ñ–æ–¥—É —Å–∫–∏–¥–∞–Ω–Ω—è –∫–≤–æ—Ç–∏ (–∑–∞–∑–≤–∏—á–∞–π —â–æ–≥–æ–¥–∏–Ω–∏ –∞–±–æ —â–æ–¥–Ω—è)
2. –î–æ–¥–∞–π—Ç–µ –±—ñ–ª—å—à–µ –∞–∫–∞—É–Ω—Ç—ñ–≤ —á–µ—Ä–µ–∑ `/rotationsetup`
3. –†–æ–∑–≥–ª—è–Ω—å—Ç–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–æ–∑–ø–æ–¥—ñ–ª—É –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –¥–æ–≤—à–∏–π —á–∞—Å

### –°—Ç–∞–Ω –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω —É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö —Å–µ—Å—ñ—ó. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è:
- –í–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –µ—Ñ–µ–º–µ—Ä–Ω—ñ —Å–µ—Å—ñ—ó
- –§–∞–π–ª —Å–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –í–∏ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç–µ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≥—ñ–ª–∫–∏

## –†–æ–∑—Ä–æ–±–∫–∞

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–º —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º
pi -e ./account-rotation.ts

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥
/rotationsetup
rotate_account({ action: "status" })
```

### –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

–î–æ–¥–∞–π—Ç–µ console.log –≤–∏—Ä–∞–∑–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–º—ñ–Ω —Å—Ç–∞–Ω—É:

```typescript
const rotateAccount = async (ctx: ExtensionContext): Promise<boolean> => {
  console.log("Current state:", state);
  // ... —Ä–µ—à—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó
};
```

–ó–∞–ø—É—Å—Ç—ñ—Ç—å pi –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º:

```bash
DEBUG=* pi -e ./account-rotation.ts
```

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Å–ª—ñ–¥—É—î –ø–∞—Ç–µ—Ä–Ω—É stateful tool –∑ –ø—Ä–∏–∫–ª–∞–¥—É `todo.ts` pi:

1. **–°—Ç–∞–Ω —É –ø–∞–º'—è—Ç—ñ** - –û–±'—î–∫—Ç `AccountRotationState`
2. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏** - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –≤ `details` —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É
3. **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è** - –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É —ñ–∑ –∑–∞–ø–∏—Å—ñ–≤ —Å–µ—Å—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
4. **–ü–æ–¥—ñ—ó —Å–µ—Å—ñ—ó** - –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è `session_start`, `session_switch`, `session_fork`, `session_tree`
5. **–û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π** - –†–µ–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞ `model_error` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Ä–æ—Ç–∞—Ü—ñ—ó

## –î–æ–≤—ñ–¥–Ω–∏–∫ API

### –ö–æ–º–∞–Ω–¥–∞ `/rotationsetup`

–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –º–∞–π—Å—Ç–µ—Ä –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—ñ–≤.

### –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `rotate_account`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `action`: `"rotate"` | `"status"`

**–ü–æ–≤–µ—Ä—Ç–∞—î:**
- –¢–µ–∫—Å—Ç–æ–≤–∏–π –æ–ø–∏—Å –¥—ñ—ó
- `RotationDetails` —É –ø–æ–ª—ñ `details`

### –ü–æ–¥—ñ—ó

- `model_error` - –Ü–Ω—ñ—Ü—ñ—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Ä–æ—Ç–∞—Ü—ñ—é –ø—Ä–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è—Ö
- `session_start/switch/fork/tree` - –í—ñ–¥–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT

## –í–Ω–µ—Å–æ–∫

–í–Ω–µ—Å–∫–∏ –≤—ñ—Ç–∞—é—Ç—å—Å—è! –ë—É–¥—å –ª–∞—Å–∫–∞, –¥–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—å –Ω–∞—Å—Ç–∞–Ω–æ–≤ —Ä–æ–∑—Ä–æ–±–∫–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—å pi –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó pi](https://github.com/badlogic/pi-mono/tree/main/packages/coding-agent/docs).

## –ü–æ–¥—è–∫–∏

–°—Ç–≤–æ—Ä–µ–Ω–æ –¥–ª—è [pi-coding-agent](https://github.com/badlogic/pi-mono) –∑–≥—ñ–¥–Ω–æ –∑ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏ —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ API —Ä–æ–∑—à–∏—Ä–µ–Ω—å.
